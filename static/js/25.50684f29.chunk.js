(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1435:function(e,n,t){"use strict";t.r(n);var r=t(176),a=t(199),c=t.n(a),o=t(200),s=t(42),l=t(43),i=t(47),u=t(44),p=t(48),d=t(0),h=t.n(d),f=t(46),m=t(198),g=t(79),b=t.n(g),v=t(25),k=t(1300),y=t.n(k),R=t(71),E=t.n(R),C=t(1242),x=t.n(C),O=t(1245),w=t.n(O),S=t(269),j=t.n(S),T=t(1335),N=t.n(T),P=t(245),L=t.n(P),D=t(213),B=t.n(D),I=t(229),M=t.n(I),F=t(230),z=t.n(F),A=t(270),J=t.n(A),Y=t(1339),q=t.n(Y),G=t(1341),K=t.n(G),$=t(232),H=t.n($),U=t(233),W=t.n(U),Q=t(39),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(n){n({type:Q.b,payload:e})}},X=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(i.a)(this,Object(u.a)(n).call(this,e))).handleDrawerOpen=function(){t.props.dispatchMenuToggleAction(!0)},t.handleDrawerClose=function(){t.props.dispatchMenuToggleAction(!1)},t}return Object(p.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props,n=e.classes,t=e.theme,r=e.runnerOnClick,a=e.raceOnClick,c=e.menuReducer.menuOpen;return h.a.createElement("div",{className:n.root},h.a.createElement(E.a,null),h.a.createElement(x.a,{position:"fixed",className:b()(n.appBar,Object(m.a)({},n.appBarShift,c))},h.a.createElement(w.a,{disableGutters:c},h.a.createElement(L.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:b()(n.menuButton,c&&n.hide)},h.a.createElement(B.a,null)))),h.a.createElement(y.a,{className:n.drawer,variant:"persistent",anchor:"left",open:c,classes:{paper:n.drawerPaper}},h.a.createElement("div",{className:n.drawerHeader},h.a.createElement(L.a,{onClick:this.handleDrawerClose},"ltr"===t.direction?h.a.createElement(M.a,null):h.a.createElement(z.a,null))),h.a.createElement(N.a,null),h.a.createElement(j.a,null,h.a.createElement(J.a,{button:!0,key:"Runner",onClick:r},h.a.createElement(q.a,null,h.a.createElement(H.a,null)),h.a.createElement(K.a,{primary:"Runner"})),h.a.createElement(J.a,{button:!0,key:"Race",onClick:a},h.a.createElement(q.a,null,h.a.createElement(W.a,null)),h.a.createElement(K.a,{primary:"Race"})))))}}]),n}(h.a.Component),Z=Object(f.b)(function(e){return Object(r.a)({},e)},function(e){return{dispatchMenuToggleAction:function(n){return e(V(n))}}})(Object(v.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(r.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},{withTheme:!0})(h.a.memo(X))),_=t(271),ee=t(275),ne=t(276),te=t.n(ne),re=(t(278),t(45)),ae=t.n(re),ce=t(10),oe=t(52),se=t(53),le=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n){n({type:se.a,payload:e})}},ie=t(1352),ue=t.n(ie);var pe=Object(v.withStyles)(function(e){return{}})(function(){return h.a.createElement("span",null,h.a.createElement("br",null),h.a.createElement(ue.a,null),h.a.createElement("br",null),h.a.createElement(ue.a,{color:"secondary",variant:"query"}),h.a.createElement("br",null),h.a.createElement(ue.a,null))}),de=t(170),he=t.n(de),fe=t(167),me=t.n(fe);var ge=Object(v.withStyles)(function(e){return{noRaces:{marginRight:"10px",marginLeft:"10px",marginTop:"5px",marginBottom:"5px"}}})(function(e){var n=e.classes;return h.a.createElement(he.a,{className:n.noRaces},h.a.createElement(me.a,{variant:"subheading"},"No race results found for this runner!"))}),be=t(1354),ve=t.n(be);function ke(e){var n=e.key,t=e.value;"null"!==t&&sessionStorage.setItem(n,JSON.stringify(t))}function ye(e){var n=sessionStorage.getItem(e);return n?JSON.parse(n):n}function Re(e){e&&sessionStorage.removeItem(e)}function Ee(e){var n=e.key,t=e.value;"null"!==t&&localStorage.setItem(n,JSON.stringify(t))}function Ce(e){var n=localStorage.getItem(e);return n?JSON.parse(n):n}function xe(e){e&&localStorage.removeItem(e)}var Oe=new(t(1374).AllHtmlEntities);function we(e,n,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(o.a)(c.a.mark(function e(n,t,r){var a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.join("$$"),o=null,e.next=4,ve.a.get("".concat("https://fellrace-finder-server.herokuapp.com","/runner/").concat(a,"/").concat(t,"/").concat(r)).then(function(e){return o=e.data}).catch(function(e){console.log(e)});case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(e,n){return Te.apply(this,arguments)}function Te(){return(Te=Object(o.a)(c.a.mark(function e(n,t){var r,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.join("$$"),a=t.replace("/","**"),a=Oe.encode(a),o=null,e.next=6,ve.a.get("".concat("https://fellrace-finder-server.herokuapp.com","/runnerByRace/").concat(r,"/").concat(a)).then(function(e){return o=e.data}).catch(function(e){console.log(e)});case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ne(e){var n="runnersList".concat(e),t=ye(n);if(t)return{options:t};var r="".concat("https://fellrace-finder-server.herokuapp.com","/autocomplete/runner/").concat(e.toLowerCase());return fetch(r).then(function(e){return e.json()}).then(function(e){var t=[];return e.items.map(function(e){var n=!1;return t.map(function(t){return e.display===t.display&&(n=!0,!0)}),n||t.push(e),n}),ke({key:n,value:t}),{options:t}})}function Pe(e){var n="raceSearch".concat(e),t=ye(n);if(t)return{options:t};var r="".concat("https://fellrace-finder-server.herokuapp.com","/autocomplete/race/").concat(e.toLowerCase());return fetch(r).then(function(e){return e.json()}).then(function(e){var t=[];return console.log(e),e.map(function(e){var n=!1;return t.map(function(t){return e.display===t.display&&(n=!0,!0)}),n||t.push(e),n}),ke({key:n,value:t}),{options:t}})}function Le(e){return De.apply(this,arguments)}function De(){return(De=Object(o.a)(c.a.mark(function e(n){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://fellrace-finder-server.herokuapp.com","/race/byNames/").concat(n),r=null,e.next=4,ve.a.get(t).then(function(e){return r=e.data}).catch(function(e){console.log(e)});case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Be(e){var n=e.split(" ").map(function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)," ")}),t="";return n.map(function(e){return t="".concat(t).concat(e)}),t}var Ie=h.a.lazy(function(){return t.e(4).then(t.bind(null,1424))}),Me=h.a.lazy(function(){return t.e(3).then(t.bind(null,1425))}),Fe=h.a.lazy(function(){return t.e(5).then(t.bind(null,1426))}),ze=h.a.lazy(function(){return t.e(15).then(t.bind(null,1427))}),Ae=h.a.lazy(function(){return Promise.all([t.e(12),t.e(24)]).then(t.bind(null,1428))}),Je=h.a.lazy(function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,1429))}),Ye=h.a.lazy(function(){return Promise.all([t.e(10),t.e(23)]).then(t.bind(null,1430))}),qe=h.a.lazy(function(){return Promise.all([t.e(11),t.e(21)]).then(t.bind(null,1431))}),Ge=h.a.lazy(function(){return t.e(18).then(t.bind(null,1432))}),Ke=function(e){return{searchField:{paddingBottom:"5px",paddingLeft:"5px",paddingRight:"5px",marginTop:"-5px",zIndex:"2"},search:{position:"sticky",backgroundColor:"white",zIndex:"2 !important",borderBottom:"1px solid #CCCCCC",top:"40px",paddingTop:"40px",borderTop:"1px solid #CCCCCC",paddingBottom:"2px"},progress:{margin:2*e.spacing.unit}}},$e="chosenRunners",He=0,Ue=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(i.a)(this,Object(u.a)(n).call(this,e))).componentDidMount=function(){window.addEventListener("scroll",t.onScroll,!1);var e=Ce($e);e&&(t.props.dispatchChosenRunners(e),t.onChange(e)),_.animateScroll.scrollTo(0)},t.componentWillUnmount=function(){window.removeEventListener("scroll",t.onScroll,!1)},t.buildClearButton=function(){return h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:Ke.prototypeprogress})},h.a.createElement(Fe,{onClick:t.clearClick}))},t.onScroll=function(){window.scrollY>=165&&!t.props.scrollReducer.sticky?t.props.dispatchSticky(!0):window.scrollY<165&&t.props.scrollReducer.sticky&&t.props.dispatchSticky(!1)},t.scrollToTop=function(){_.animateScroll.scrollTo(170)},t.performSearch=function(){var e=Object(o.a)(c.a.mark(function e(n){var r,a,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=19;break}if(t.props.dispatchLoadingProgress(!0),t.props.dispatchRunnerDetails(null),t.props.dispatchChosenRace(""),r=t.props.searchReducer.endIndex,a="getRunner".concat(n).replace(" ",""),o=ye(a)){e.next=14;break}return e.next=10,we(n,He,r);case 10:s=e.sent,ke({key:a,value:JSON.stringify(s)}),e.next=16;break;case 14:s=JSON.parse(o),Re(a);case 16:t.props.dispatchRunnerDetails(s),t.props.dispatchLoadingProgress(!1),t.scrollToTop();case 19:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.searchForRunners=function(){var e=Object(o.a)(c.a.mark(function e(n,t){var r,a,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length>0)){e.next=16;break}if(r=[],n.map(function(e){r.push(e.display)}),a="getRunners".concat(r.join("")).concat(He).concat(t).replace(" ",""),o=ye(a)){e.next=13;break}return e.next=8,we(r,He,t);case 8:return s=e.sent,ke({key:a,value:JSON.stringify(s)}),e.abrupt("return",s);case 13:s=JSON.parse(o),Re(a);case 15:return e.abrupt("return",s);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),t.searchForRunnersByRace=function(){var e=Object(o.a)(c.a.mark(function e(n,t){var r,a,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length>0)){e.next=16;break}if(r=[],n.map(function(e){r.push(e.display)}),a="getRunnersByRace".concat(r.join("")).concat(t).replace(" ",""),o=ye(a)){e.next=13;break}return e.next=8,je(r,t);case 8:return s=e.sent,ke({key:a,value:JSON.stringify(s)}),e.abrupt("return",s);case 13:s=JSON.parse(o),Re(a);case 15:return e.abrupt("return",s);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),t.handleClick=function(){var e=Object(o.a)(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""===(r=t.searchRunnerRef.value.trim())){e.next=8;break}if(Be(r)===t.state.runnerName){e.next=6;break}return e.next=6,t.performSearch(r);case 6:e.next=9;break;case 8:t.clearClick();case 9:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.clearClick=function(){t.props.dispatchLoadingProgress(!0),t.props.dispatchRunnerDetails(null),t.props.dispatchSticky(!1),t.props.dispatchChosenRunners([]),t.props.dispatchChosenRace(""),t.props.dispatchEndIndex(0),xe($e),sessionStorage.clear(),t.props.dispatchLoadingProgress(!1),_.animateScroll.scrollToTop()},t.scrollToTopClick=function(e){e.preventDefault(),_.animateScroll.scrollToTop()},t.scrollToBottomClick=function(e){e.preventDefault(),_.animateScroll.scrollToBottom()},t.loadingProgress=function(){return h.a.createElement(pe,null)},t.noResultsFound=function(){return h.a.createElement(ge,null)},t.buildRaceResult=function(e){var n,t=e;return t&&t.length>0&&(t=t[0]),t.raceInfo&&(n=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:Ke.progress})},h.a.createElement(Je,{raceInfo:t.raceInfo}))),h.a.createElement("div",{key:t.id},h.a.createElement("br",null),h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:Ke.progress})},h.a.createElement(ze,{race:t})),n,h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:Ke.progress})},h.a.createElement(Ae,{runner:t.runner})))},t.loadMoreOnClick=function(){var e=Object(o.a)(c.a.mark(function e(n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=t.props.searchReducer.chosenRunners,t.props.dispatchLoadMoreProgress(!0),e.next=5,t.onChange(r);case 5:t.props.dispatchLoadMoreProgress(!1);case 6:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.calculateNextEndIndex=function(e){var n=t.props.runnerReducer.runnerDetails,r=t.props.searchReducer,a=r.endIndex,c=r.chosenRunners;return 0===a?10:e.length===c.length?a+10>n.overallStats.noOfRaces?n.overallStats.noOfRaces:a+10:10},t.onChange=function(){var e=Object(o.a)(c.a.mark(function e(n){var r,a,o,s,l,i,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.runnerReducer.runnersDetails,a=t.props.searchReducer,o=a.chosenRunners,s=a.chosenRace,l=a.endIndex,!(n.length>0)){e.next=16;break}return t.props.dispatchLoadingProgress(!0),i=t.calculateNextEndIndex(n),e.next=7,t.searchForRunners(n,i);case 7:u=e.sent,te.a.isEqual(o,n)||t.props.dispatchChosenRunners(n),te.a.isEqual(r,u)||t.props.dispatchRunnerDetails(u),l!==i&&t.props.dispatchEndIndex(i),""!==s&&t.props.dispatchChosenRace(""),Ee({key:$e,value:n}),t.props.dispatchLoadingProgress(!1),e.next=17;break;case 16:t.clearClick();case 17:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.fetchRunnerByRace=function(){var e=Object(o.a)(c.a.mark(function e(n,r){var a,o,s,l,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props.runnerReducer.runnersDetails,o=t.props.searchReducer,s=o.chosenRace,l=o.chosenRunners,!(n.length>0)){e.next=13;break}return e.next=5,t.searchForRunnersByRace(n,r);case 5:i=e.sent,r!==s&&t.props.dispatchChosenRace(r),te.a.isEqual(n,l)||t.props.dispatchChosenRunners(n),te.a.isEqual(a,i)||t.props.dispatchRunnerDetails(i),Ee({key:$e,value:n}),t.props.dispatchLoadingProgress(!1),e.next=14;break;case 13:t.clearClick();case 14:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),t.fetchRunners=function(){var e=Object(o.a)(c.a.mark(function e(n,r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("searching - ",n),t.props.dispatchLoadingProgress(!0),n||r(null,{options:[]}),!(n.length>2)){e.next=11;break}return e.t0=r,e.next=7,Ne(n);case 7:e.t1=e.sent,(0,e.t0)(null,e.t1),e.next=12;break;case 11:r(null,{options:[]});case 12:t.props.dispatchLoadingProgress(!1);case 13:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),t.debouncedFetchRunners=te.a.debounce(t.fetchRunners,100),t.getRunners=function(e,n){if(!e||e.length<4)return n(null,{options:[]});t.debouncedFetchRunners(e,n)},t.handleChooseRaceChange=function(){var e=Object(o.a)(c.a.mark(function e(n){var r,a,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.searchReducer,a=r.chosenRunners,o=r.endIndex,s=n.target.value,t.props.dispatchLoadingProgress(!0),0!==o&&t.props.dispatchEndIndex(0),"all"!==s){e.next=9;break}return e.next=7,t.onChange(a);case 7:e.next=11;break;case 9:return e.next=11,t.fetchRunnerByRace(a,s);case 11:t.scrollToTop();case 12:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.populateOverallStats=function(){var e=t.props.runnerReducer.runnerDetails;return e.overallStats?h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:Ke.progress})},h.a.createElement(qe,{overallStats:e.overallStats})):null},t.buildChosenRaceList=function(e,n){var r=[];e||(e="");var a=e.split("||");return a.length>1?a.map(function(e){for(var t=0;t<n.length;t++)n[t].name===e&&r.push(n[t])}):n&&(r=n),r.length>1&&(r=r.sort(function(e,n){return new Date(n.dateTime)-new Date(e.dateTime)})),r.map(function(e){return t.buildRaceResult(e)})},t.searchRunnerRef=h.a.createRef(),t}return Object(p.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e,n,t,r,a,c,o,s,l,i=this,u=this.props.classes,p=u.progress,f=u.searchField,m=u.search,g=this.props.searchReducer,b=g.loadingProgress,v=g.chosenRunners,k=g.chosenRace,y=g.loadMoreLoading,R=this.props.runnerReducer.runnerDetails,E=this.props.scrollReducer.sticky,C=E?m:"",x=this.props.searchReducer.endIndex;if(b&&(r=this.loadingProgress()),null!=R&&R.races&&R.races.length>0){e=this.buildClearButton(),n=this.populateOverallStats();var O=R.races;0===x&&(x=10),""===k?(t=O.map(function(e){return i.buildRaceResult(e)}),R.overallStats.noOfRaces>x&&(o=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:p})},h.a.createElement(Ge,{onClick:this.loadMoreOnClick})))):(t=this.buildChosenRaceList(k,R.races)).length>x&&(o=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:p})},h.a.createElement(Ge,{onClick:this.loadMoreOnClick}))),c=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:p})},h.a.createElement(Ye,{raceNames:R.raceNames,chosenRace:k,onChange:this.handleChooseRaceChange})),y?(s=this.loadingProgress(),o=null,_.animateScroll.scrollMore(250)):(l=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:p})},h.a.createElement(Me,{onClick:this.scrollToBottomClick})),E&&(a=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:p})},h.a.createElement(Ie,{onClick:this.scrollToTopClick}))))}else null!=R&&0===R.races.length&&(t=this.noResultsFound());return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:C},h.a.createElement(ee.a,{cacheOptions:!0,defaultOptions:!0,className:f,valueKey:"original",labelKey:"display",matchProp:"any",name:"runner-search-field",onChange:this.onChange,loadOptions:this.getRunners,placeholder:"Search Runner",noResultsText:"No runners found",value:v,multi:!0,ignoreAccents:!1}),c,e),l,r,n,t,s,o,a)}}]),n}(d.PureComponent),We=Object(f.b)(function(e){return Object(r.a)({},e)},function(e){return{dispatchLoadingProgress:function(n){return e(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(n){n({type:ce.e,payload:e})}}(n))},dispatchRunnerDetails:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(n){n({type:oe.a,payload:e})}}(n))},dispatchSticky:function(n){return e(le(n))},dispatchChosenRunners:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(n){n({type:ce.c,payload:e})}}(n))},dispatchChosenRace:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(n){n({type:ce.b,payload:e})}}(n))},dispatchEndIndex:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(n){n({type:ce.d,payload:e})}}(n))},dispatchLoadMoreProgress:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n){n({type:ce.g,payload:e})}}(n))}}})(Object(v.withStyles)(Ke)(Ue)),Qe=t(209),Ve=t.n(Qe),Xe=t(210),Ze=t.n(Xe),_e=t(211),en=t.n(_e),nn=t(193),tn=t.n(nn),rn=t(54),an=h.a.lazy(function(){return t.e(4).then(t.bind(null,1424))}),cn=h.a.lazy(function(){return t.e(3).then(t.bind(null,1425))}),on=h.a.lazy(function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,1429))}),sn=h.a.lazy(function(){return t.e(5).then(t.bind(null,1426))}),ln=h.a.lazy(function(){return t.e(13).then(t.bind(null,290))}),un=h.a.lazy(function(){return t.e(17).then(t.bind(null,1433))}),pn=h.a.lazy(function(){return Promise.all([t.e(0),t.e(1),t.e(16)]).then(t.bind(null,1434))}),dn=function(e){return{searchField:{paddingBottom:"5px",paddingLeft:"5px",paddingRight:"5px",marginTop:"-5px",zIndex:"2"},search:{position:"sticky",backgroundColor:"white",zIndex:"2 !important",borderBottom:"1px solid #CCCCCC",top:"40px",paddingTop:"40px",borderTop:"1px solid #CCCCCC",paddingBottom:"2px"},progress:{margin:2*e.spacing.unit},expansionPanel:{marginTop:"5px",marginBottom:"15px"}}},hn="chosenRaces",fn=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(i.a)(this,Object(u.a)(n).call(this,e))).componentDidMount=function(){window.addEventListener("scroll",t.onScroll,!1);var e=Ce(hn);e&&(t.props.dispatchLoadingProgress(!0),t.props.dispatchChosenRace(e),t.onChange(e),t.props.dispatchLoadingProgress(!1)),_.animateScroll.scrollTo(0)},t.componentWillUnmount=function(){window.removeEventListener("scroll",t.onScroll,!1)},t.onScroll=function(){window.scrollY>=165&&!t.props.scrollReducer.sticky?t.props.dispatchSticky(!0):window.scrollY<165&&t.props.scrollReducer.sticky&&t.props.dispatchSticky(!1)},t.buildClearButton=function(){return h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:dn.prototypeprogress})},h.a.createElement(sn,{onClick:t.clearClick}))},t.onScroll=function(){window.scrollY>=165&&!t.props.scrollReducer.sticky?t.props.dispatchSticky(!0):window.scrollY<165&&t.props.scrollReducer.sticky&&t.props.dispatchSticky(!1)},t.scrollToTop=function(){_.animateScroll.scrollTo(170)},t.loadingProgress=function(){return h.a.createElement(pe,null)},t.noResultsFound=function(){return h.a.createElement(ge,null)},t.scrollToTopClick=function(e){e.preventDefault(),_.animateScroll.scrollToTop()},t.scrollToBottomClick=function(e){e.preventDefault(),_.animateScroll.scrollToBottom()},t.onChange=function(){var e=Object(o.a)(c.a.mark(function e(n){var r,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.raceReducer.raceDetails,a=t.props.searchReducer.chosenRaces,!(n.length>1)){e.next=6;break}return t.props.dispatchChosenRace(a),t.props.dispatchLoadingProgress(!1),e.abrupt("return");case 6:if(1!==n.length){e.next=17;break}return t.props.dispatchLoadingProgress(!0),e.next=10,t.searchForRaces(n);case 10:o=e.sent,te.a.isEqual(a,n)||t.props.dispatchChosenRace(n),te.a.isEqual(r,o)||t.props.dispatchRaceDetails(o),Ee({key:hn,value:n}),t.props.dispatchLoadingProgress(!1),e.next=18;break;case 17:t.clearClick();case 18:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.fetchRaces=function(){var e=Object(o.a)(c.a.mark(function e(n,r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("searching - ",n),t.props.dispatchLoadingProgress(!0),n||r(null,{options:[]}),!(n.length>2)){e.next=11;break}return e.t0=r,e.next=7,Pe(n);case 7:e.t1=e.sent,(0,e.t0)(null,e.t1),e.next=12;break;case 11:r(null,{options:[]});case 12:t.props.dispatchLoadingProgress(!1);case 13:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),t.debouncedFetchRaces=te.a.debounce(t.fetchRaces,200),t.getRaces=function(e,n){if(!e||e.length<3)return n(null,{options:[]});t.debouncedFetchRaces(e,n)},t.searchForRaces=function(){var e=Object(o.a)(c.a.mark(function e(n){var t,r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}if(t="getRaces".concat(n[0].display).replace(" ",""),r=ye(t)){e.next=11;break}return e.next=6,Le(n[0].original);case 6:return a=e.sent,ke({key:t,value:JSON.stringify(a)}),e.abrupt("return",a);case 11:a=JSON.parse(r),Re(t);case 13:return e.abrupt("return",a);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.clearClick=function(){t.props.dispatchLoadingProgress(!0),t.props.dispatchSticky(!1),t.props.dispatchRaceDetails(null),t.props.dispatchChosenRace(null),xe(hn),t.props.dispatchLoadingProgress(!1),_.animateScroll.scrollToTop()},t.buildRaceInfo=function(e){var n;return e&&(n=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:dn.progress})},h.a.createElement(on,{raceInfo:e}))),h.a.createElement("div",{key:e.id},n)},t.buildResultCategories=function(e,n){var t;return e&&(t=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:n.progress})},h.a.createElement(ln,{categoryRecords:e}))),h.a.createElement(h.a.Fragment,null,h.a.createElement(Ve.a,{key:e.length,className:n.expansionPanel},h.a.createElement(Ze.a,{expandIcon:h.a.createElement(tn.a,null)},h.a.createElement(me.a,{className:n.heading},h.a.createElement("b",null,"Overall"))),h.a.createElement(en.a,null,t)))},t.buildYearResultCategories=function(e){var n;return e&&(n=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:dn.progress})},h.a.createElement(un,{races:e}),h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement("br",null))),n},t.buildYearPerformanceGraph=function(e,n){var t=e.map(function(e){if(e.performance>0)return["".concat(e.year),"".concat(e.performance,"%")]}).filter(function(e){return void 0!==e});return h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:n})},h.a.createElement(pn,{raceData:t}))},t.searchRaceRef=h.a.createRef(),t}return Object(p.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e,n,t,r,a,c,o,s,l=this.props.classes,i=l.progress,u=l.searchField,p=l.search,f=this.props.searchReducer,m=f.loadingRaceProgress,g=f.chosenRaces,b=this.props.raceReducer.raceDetails,v=this.props.scrollReducer.sticky,k=v?p:"";return m&&(n=this.loadingProgress()),g&&g.length>0&&(e=this.buildClearButton()),b&&(t=this.buildRaceInfo(b.raceInfo),r=this.buildResultCategories(b.categoryRecords,this.props.classes),o=this.buildYearResultCategories(b.races),s=this.buildYearPerformanceGraph(b.races,i),c=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:i})},h.a.createElement(cn,{onClick:this.scrollToBottomClick}))),v&&(a=h.a.createElement(d.Suspense,{fallback:h.a.createElement(ae.a,{className:i})},h.a.createElement(an,{onClick:this.scrollToTopClick}))),h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:k},h.a.createElement(ee.a,{cacheOptions:!0,defaultOptions:!0,className:u,valueKey:"original",labelKey:"display",matchProp:"any",name:"race-search-field",onChange:this.onChange,loadOptions:this.getRaces,placeholder:"Search Race",noResultsText:"No race found",value:g,multi:!0,ignoreAccents:!1}),e),n,t,s,r,o,c,a)}}]),n}(d.PureComponent),mn=Object(f.b)(function(e){return Object(r.a)({},e)},function(e){return{dispatchLoadingProgress:function(n){return e(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(n){n({type:ce.f,payload:e})}}(n))},dispatchChosenRace:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(n){n({type:ce.a,payload:e})}}(n))},dispatchRaceDetails:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(n){n({type:rn.a,payload:e})}}(n))},dispatchSticky:function(n){return e(le(n))}}})(Object(v.withStyles)(dn)(fn)),gn="Main-menuoption",bn=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(i.a)(this,Object(u.a)(n).call(this,e))).raceOnClick=function(){var e=Object(o.a)(c.a.mark(function e(n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),Ee({key:gn,value:"race"}),t.props.dispatchMenuAction({race:!0,runner:!1}),t.props.dispatchMenuToggleAction(!1);case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t.runnerOnClick=function(){var e=Object(o.a)(c.a.mark(function e(n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),Ee({key:gn,value:"runner"}),t.props.dispatchMenuAction({race:!1,runner:!0}),t.props.dispatchMenuToggleAction(!1);case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t}return Object(p.a)(n,e),Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=Ce(gn);e&&("race"===e?this.props.dispatchMenuAction({race:!0,runner:!1}):this.props.dispatchMenuAction({race:!1,runner:!0}),this.props.dispatchMenuToggleAction(!1))}},{key:"render",value:function(){var e,n=this.props.menuReducer,t=n.race,r=n.runner,a=!1;return e=t?h.a.createElement(mn,null):h.a.createElement(We,null),(t||r)&&(a=!0),h.a.createElement(h.a.Fragment,null,h.a.createElement(Z,{raceOnClick:this.raceOnClick,runnerOnClick:this.runnerOnClick,closeMenu:a}),e)}}]),n}(d.PureComponent);n.default=Object(f.b)(function(e){return Object(r.a)({},e)},function(e){return{dispatchMenuAction:function(n){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(n){n({type:Q.a,payload:e})}}(n))},dispatchMenuToggleAction:function(n){return e(V(n))}}})(bn)}}]);
//# sourceMappingURL=25.50684f29.chunk.js.map